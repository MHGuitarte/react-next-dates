import { useState } from 'react';

import { ArgsTable, Canvas, Meta, Story } from '@storybook/addon-docs/blocks';

import { DateRangePicker, TimePicker } from '../../src';

import { enUS } from 'date-fns/locale';

<Meta title="Components/DateRangePicker" component={DateRangePicker} />

# Date Range Picker

<br />

## Props

<ArgsTable of="." />

## Children

React next dates don't provide `Input` element.

Like `DatePicker`, `DateRangePicker` children props is a function with parameters to render your own inputs with your own style.

```tsx
export interface DateRangePickerChildrenProps {
  startDateInputProps: DatePickerInputProps;
  endDateInputProps: DatePickerInputProps;
  openStartDatePicker: () => void;
  openEndDatePicker: () => void;
}


export type DateRangePickerChildren = (props: DateRangePickerChildrenProps) => ReactNode;
```

```tsx
<DateRangePicker locale={enUS}>
  {({ startDateInputProps, endDateInputProps }) => (
    <>
      <input {...startDateInputProps} />
      <input {...endDateInputProps} />
    </>
  )}
</DateRangePicker>
```

## Default

<Canvas>
  <Story name="Default">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps }) => (
              <>
                <input {...startDateInputProps} />
                <input {...endDateInputProps} />
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>

## Min Date

<Canvas>
  <Story name="Min Date">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            minDate={new Date()}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps }) => (
              <>
                <input {...startDateInputProps} />
                <input {...endDateInputProps} />
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>

## Max Date

<Canvas>
  <Story name="Max Date">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            maxDate={new Date()}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps }) => (
              <>
                <input {...startDateInputProps} />
                <input {...endDateInputProps} />
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>

## Min length (2)

<Canvas>
  <Story name="Min length">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            minLength={2}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps }) => (
              <>
                <input {...startDateInputProps} />
                <input {...endDateInputProps} />
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>

## Max length (5)

<Canvas>
  <Story name="Max length">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            maxLength={5}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps }) => (
              <>
                <input {...startDateInputProps} />
                <input {...endDateInputProps} />
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>

## Custom Trigger

By default, calendar popper auto open on input focus. If you want a custom open trigger, you can deactivate `autoOpen` and call `openStartDatePicker` or `openEndDatePicker` function on children props.

<Canvas>
  <Story name="Custom Trigger">
    {() => {
      const [startDate, setStartDate] = useState(null);
      const [endDate, setEndDate] = useState(null);
      return (
        <div className="date-picker-container">
          <DateRangePicker
            locale={enUS}
            startDate={startDate}
            endDate={endDate}
            onStartDateChange={setStartDate}
            onEndDateChange={setEndDate}
            autoOpen={false}
            portalContainer={document.body}>
            {({ startDateInputProps, endDateInputProps, openStartDatePicker, openEndDatePicker }) => (
              <>
                <div className="custom-trigger-container">
                  <input {...startDateInputProps} />
                  <button onClick={openStartDatePicker} />
                </div>
                <div className="custom-trigger-container">
                  <input {...endDateInputProps} />
                  <button onClick={openEndDatePicker} />
                </div>
              </>
            )}
          </DateRangePicker>
        </div>
      );
    }}
  </Story>
</Canvas>
